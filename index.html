<html>
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

		<title>Webhook Answer Preview</title>

		<link rel='stylesheet' type='text/css' href='src/index.css'>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.2/fetch.min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core-min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/cipher-core-min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/aes-min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/enc-base64-min.js'></script>
	</head>

	<body>
		<div class='hero'>
			<h2 class='primary'>Webhook Answer Preview</h2>
			<p>這是一個測試工具，在你開發自己的 Webhook Url 時，可以先透過這個工具，從 Webhook Query API 取得答案，搭配 Hash key & IV key 解密查看答案結構</p>
		</div>

		<div class='container'>
			<div class='form'>
				<label>Webhook Query API Path</label>
				<small>請務必確認格式為 <code>https://${SURVEYCAKE_DOMAIN}/webhook/v0/</code></small>
				<input id='webhook-query-api' placeholder='ex: https://www.surveycake.com/webhook/v0/' />
				<label>Survey ID / 問卷獨立編號</label>
				<small><code>${SVID}</code> 是從 Webhook Url 接收到的 <code>$POST['svid']</code></small>
				<input id='survey-id' placeholder='ex: yPZQe' />
				<label>Answer Hash / 答案獨立編號</label>
				<small><code>${HASH}</code> 是從 Webhook Url 接收到的 <code>$POST['hash']</code></small>
				<input id='answer-hash' placeholder='ex: 372f7559d64f86df13eb9e2cbc7953c0' />
				<label>Hash key</label>
				<small>從 SurveyCake 後台取得的 Webhook 解碼資訊</small>
				<input id='hash-key' />
				<label>IV key</label>
				<small>從 SurveyCake 後台取得的 Webhook 解碼資訊</small>
				<input id='iv-key' />
				<label>Request Headers</label>
				<small>Request with header data, testing pre-flight request, only support after <b>v4.5.9</b></small>
				<pre>
{
	"content-type": "application/json",
	"accept": "application/json"
}					
				</pre>
				<textarea id='headers' rows='5'>{}</textarea>
				<button id='get-data'>Get Answer Preview</button>
			</div>

			<div class='preview'>
				<label>組合後 Webhook Query API 預覽</label>
				<code id='webhook-query-api-preview'></code>
				<hr/>
				<label>Result</label>
				<textarea id='result' rows='16'></textarea>
			</div>
		</div>
		
		<script src='src/index.js'></script>
	</body>
</html>
